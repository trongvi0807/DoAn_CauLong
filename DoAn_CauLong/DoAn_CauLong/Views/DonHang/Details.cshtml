@model DoAn_CauLong.Models.DonHang
@{
    ViewBag.Title = "Chi tiết Đơn hàng #" + Model.MaDonHang;
}

<div class="container" style="padding: 20px;">
    <h2>@ViewBag.Title</h2>
    <a href="@Url.Action("Index", "DonHang")" class="btn btn-default btn-sm" style="margin-bottom: 15px;">
        &larr; Quay lại danh sách đơn hàng
    </a>
    <hr />

    <div class="row">
        <div class="col-md-6">
            <h4>Thông tin đơn hàng</h4>
            <table class="table">
                <tr>
                    <th>Mã đơn:</th>
                    <td>#@Model.MaDonHang</td>
                </tr>
                <tr>
                    <th>Ngày đặt:</th>
                    <td>@(Model.NgayDat?.ToString("dd/MM/yyyy HH:mm"))</td>
                </tr>
                <tr>
                    <th>Trạng thái:</th>
                    <td><span class="label label-warning">@Model.TrangThai</span></td>
                </tr>
            </table>

            <h4>Thông tin người nhận</h4>
            <table class="table">
                <tr>
                    <th>Người đặt:</th>
                    <td>@Model.KhachHang.HoTen</td>
                </tr>
                <tr>
                    <th>Địa chỉ giao:</th>
                    <td>@Model.DiaChiGiaoHang</td>
                </tr>
                <tr>
                    <th>Số điện thoại:</th>
                    <td>@Model.SoDienThoaiNhanHang</td>
                </tr>
                @if (!string.IsNullOrEmpty(Model.GhiChu))
                {
                    <tr>
                        <th>Ghi chú:</th>
                        <td>@Model.GhiChu</td>
                    </tr>
                }
            </table>
        </div>

        <div class="col-md-6" style="text-align: right;">
            <h4>Tổng tiền</h4>
            <h2 style="color: #f36f21; font-weight: bold;">@(Model.TongTien?.ToString("N0"))đ</h2>
        </div>
    </div>

    <hr />

    <h4>Chi tiết sản phẩm</h4>
    <table class="table table-hover">
        <thead>
            <tr>
                <th colspan="2">Sản phẩm</th>
                <th>Phân loại</th>
                <th>Đơn giá</th>
                <th>Số lượng</th>
                <th>Thành tiền</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model.ChiTietDonHangs)
            {
                <tr>
                    <td style="width: 80px;">
                        <img src="@Url.Content("~/Content/images/" + (item.ChiTietSanPham.HinhAnh ?? item.ChiTietSanPham.SanPham.HinhAnhDaiDien ?? "default.jpg"))"
                             style="width: 100%; border-radius: 4px;" />
                    </td>
                    <td>@item.ChiTietSanPham.SanPham.TenSanPham</td>
                    <td>
                        @if (item.ChiTietSanPham.MauSac != null)
                        {
                            <span>Màu: @item.ChiTietSanPham.MauSac.TenMau</span><br />
                        }
                        @if (item.ChiTietSanPham.Size != null)
                        {
                            <span>Size: @item.ChiTietSanPham.Size.TenSize</span>
                        }
                    </td>
                    <td>@(item.DonGia?.ToString("N0"))đ</td>
                    <td>@item.SoLuong</td>
                    <td>@(item.ThanhTien?.ToString("N0"))đ</td>
                </tr>
            }
        </tbody>
    </table>
</div>